# 商品批量删除功能

## 功能概述

商品批量删除功能允许用户快速清理商品数据库，提供两种删除模式：
1. **删除不推荐商品** - 删除推荐分数低于阈值的商品
2. **清空商品列表** - 删除所有商品数据

## 使用场景

### 删除不推荐商品
适用于以下情况：
- 清理市场潜力较低的商品
- 移除竞争过于激烈的商品
- 优化商品数据库，只保留高质量商品
- 定期清理低分商品，保持数据库精简

### 清空商品列表
适用于以下情况：
- 重新开始商品采集
- 切换业务方向或目标市场
- 测试环境数据清理
- 系统维护和重置

## 使用方法

### 在商品列表页面

1. 访问 `/products` 页面
2. 在页面顶部统计信息栏找到批量操作按钮
3. 选择操作类型：
   - 点击 **🗑️ 删除不推荐** - 删除推荐分数 < 50 的商品
   - 点击 **🗑️ 清空列表** - 删除所有商品

### 确认对话框

点击删除按钮后，会弹出确认对话框：

#### 删除不推荐商品
- 显示操作说明和影响范围
- 提示：推荐分数低于 50 的商品通常表示市场潜力较低或竞争过于激烈
- 需要确认才能执行

#### 清空商品列表
- 显示警告信息
- 提醒：此操作将删除所有商品数据，包括趋势历史记录
- 需要确认才能执行

### 删除结果

- 删除成功后显示 Toast 通知
- 显示删除的商品数量
- 自动刷新商品列表
- 页面返回第一页

## 技术细节

### 推荐分数阈值

默认阈值为 **50 分**，可以在 API 调用时自定义：

```typescript
{
  action: 'delete_not_recommended',
  threshold: 50  // 可调整此值
}
```

### API 端点

**端点**: `DELETE /api/trends/products/bulk-delete`

**请求体**:
```json
{
  "action": "delete_not_recommended" | "delete_all",
  "threshold": 50  // 仅用于 delete_not_recommended
}
```

**响应**:
```json
{
  "success": true,
  "data": {
    "deletedCount": 123,
    "message": "已删除 123 个不推荐的商品"
  }
}
```

### 数据库操作

#### 删除不推荐商品
```sql
DELETE FROM products 
WHERE recommendation_score < 50;
```

#### 清空所有商品
```sql
DELETE FROM products;
```

注意：由于外键约束，相关的趋势历史记录也会被级联删除。

## 安全考虑

1. **确认对话框** - 防止误操作
2. **操作不可逆** - 删除后无法恢复
3. **权限控制** - 建议在生产环境中添加权限验证
4. **数据备份** - 重要数据删除前建议备份

## 最佳实践

1. **定期清理** - 建议每周或每月清理一次不推荐商品
2. **备份数据** - 清空列表前先导出重要数据
3. **测试环境** - 先在测试环境验证删除效果
4. **分批删除** - 大量数据时考虑分批删除，避免数据库压力

## 未来改进

- [ ] 添加软删除功能（标记为已删除而不是物理删除）
- [ ] 支持自定义推荐分数阈值
- [ ] 添加删除预览功能
- [ ] 支持按平台、类目等条件批量删除
- [ ] 添加删除历史记录和恢复功能
- [ ] 导出删除的商品数据
